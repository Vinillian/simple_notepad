<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Простой блокнот - 2 режима</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1><i class="fas fa-book"></i> Простой блокнот</h1>
                <div class="header-controls">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Поиск заметок...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <div class="view-toggle-container">
                        <button id="viewListBtn" class="view-toggle active" data-mode="list" title="Список (Ctrl+1)">
                            <i class="fas fa-list"></i>
                            <span>Список</span>
                        </button>
                        <button id="viewGridBtn" class="view-toggle" data-mode="grid" title="Превью (Ctrl+2)">
                            <i class="fas fa-th-large"></i>
                            <span>Превью</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="header-subtitle">
                <i class="fas fa-info-circle"></i>
                <span>Режим "<span id="viewModeText">Список</span>" активен. <small>Ctrl+1/2 для переключения</small></span>
            </div>
        </header>

        <div class="app-content">
            <!-- Боковая панель ТОЛЬКО с группами -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <h3><i class="fas fa-tags"></i> Группы</h3>
                    <div class="groups-list" id="groupsList">
                        <!-- Группы загружаются здесь -->
                    </div>
                    
                    <div class="add-group">
                        <input type="text" id="newGroupInput" placeholder="Новая группа...">
                        <button id="addGroupBtn" class="btn-small">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3><i class="fas fa-database"></i> Управление данными</h3>
                    <div class="data-actions">
                        <button id="exportBtn" class="btn btn-secondary btn-small">
                            <i class="fas fa-download"></i> Экспорт
                        </button>
                        <label for="importInput" class="btn btn-secondary btn-small" style="cursor: pointer; margin: 0;">
                            <i class="fas fa-upload"></i> Импорт
                            <input type="file" id="importInput" accept=".json" style="display: none;">
                        </label>
                    </div>
                    <div class="stats-info">
                        <div class="stat-item">
                            <i class="fas fa-sticky-note"></i>
                            <span>Текст: <span id="textNotesCount">0</span></span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-link"></i>
                            <span>Ссылки: <span id="linkNotesCount">0</span></span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Основной контент -->
            <main class="main-content">
                <!-- Форма добавления заметки -->
                <div class="add-note-form">
                    <h3><i class="fas fa-plus-circle"></i> Новая заметка</h3>
                    <div class="form-grid">
                        <input type="text" id="noteTitle" placeholder="Название заметки" class="full-width">
                        <select id="noteGroup">
                            <option value="">Выберите группу</option>
                        </select>
                    </div>
                    <textarea id="noteContent" placeholder="Введите текст заметки или ссылку... (Ctrl+Enter для сохранения)"></textarea>
                    <button id="addNoteBtn" class="btn btn-primary">
                        <i class="fas fa-save"></i> Сохранить заметку
                    </button>
                </div>

                <!-- Список заметок -->
                <div class="notes-header">
                    <div>
                        <h3><i class="fas fa-clipboard-list"></i> Заметки</h3>
                        <span id="notesCount">0</span>
                        <span class="pagination-info" id="paginationInfo"></span>
                    </div>
                    <div class="view-mode-info">
                        <i id="viewModeIcon" class="fas fa-list"></i>
                        <span id="currentViewMode">Список</span>
                    </div>
                </div>

                <div class="notes-list list-view" id="notesList">
                    <!-- Заметки загружаются здесь -->
                </div>

                <!-- Пагинация -->
                <div class="pagination">
                    <button id="loadMoreBtn" class="btn btn-secondary">
                        <i class="fas fa-chevron-down"></i> Загрузить еще
                    </button>
                </div>
            </main>
        </div>

        <footer class="app-footer">
            <p>Простой блокнот v2.2 | Всего заметок: <span id="totalNotes">0</span></p>
            <div class="app-info">
                Режим: <span id="footerViewMode">Список</span> | Загружено: <span id="loadedNotes">0</span>
            </div>
        </footer>
    </div>

    <script src="app.js"></script>
    <script>
        // Обновление статистики
        function updateStats() {
            if (window.app) {
                const totalNotes = window.app.data.items.length;
                const textNotes = window.app.data.items.filter(item => item.type === 'note').length;
                const linkNotes = window.app.data.items.filter(item => item.type === 'link').length;
                const loadedNotes = document.querySelectorAll('.note-card').length;
                
                document.getElementById('totalNotes').textContent = totalNotes;
                document.getElementById('textNotesCount').textContent = textNotes;
                document.getElementById('linkNotesCount').textContent = linkNotes;
                document.getElementById('loadedNotes').textContent = loadedNotes;
                
                // Обновляем текст режима
                const viewModeText = window.app.viewMode === 'list' ? 'Список' : 'Превью';
                document.getElementById('viewModeText').textContent = viewModeText;
                document.getElementById('currentViewMode').textContent = viewModeText;
                document.getElementById('footerViewMode').textContent = viewModeText;
                document.getElementById('viewModeIcon').className = window.app.viewMode === 'list' ? 'fas fa-list' : 'fas fa-th-large';
            }
        }
        
        // Запускаем обновление статистики
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                updateStats();
                // Обновляем каждые 3 секунды
                setInterval(updateStats, 3000);
            }, 1000);
        });
    </script>
</body>
</html>